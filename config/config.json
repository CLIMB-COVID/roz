{
  "version": "1",
  "pathogen_configs": ["mscape", "pathsafe"],
  "configs": {
    "mscape": {
      "artifact_layout": "project.sample_id.run_id",
      "files": [".1.fastq.gz", ".2.fastq.gz", ".csv"],
      "sites": {
        "birm": "analysis",
        "ukhsa": "analysis",
        "gstt": "uploader"
      },
      "bucket_policies": {
        "site_ingest": ["get", "put", "list", "delete"],
        "project_ingest": ["get", "put", "list", "delete"],
        "site_read": ["get", "list"],
        "project_read": ["get", "list"],
        "project_private": []
      },
      "site_buckets": {
        "ingest": {
          "name_layout": "{project}-{site}-{platform}-{test_flag}",
          "policy": {
            "analysis": "site_ingest",
            "uploader": "site_ingest"
          },
          "owner": "{site}"
        }
      },
      "notification_bucket_configs": {
        "ingest": {
          "rmq_exchange": "inbound.s3",
          "rmq_queue_env": "s3_matcher",
          "amqps": false
        }
      },
      "project_buckets": {
        "published_reads": {
          "name_layout": "{project}-published-reads",
          "policy": { "analysis": "project_private" },
          "owner": "admin"
        },
        "published_binned_reads": {
          "name_layout": "{project}-published-binned-reads",
          "policy": { "analysis": "project_read" },
          "owner": "admin"
        },
        "published-read-fractions": {
          "name_layout": "{project}-published-read-fractions",
          "policy": { "analysis": "project_read" },
          "owner": "admin"
        },
        "published_taxon_reports": {
          "name_layout": "{project}-published-taxon-reports",
          "policy": { "analysis": "project_ingest" },
          "owner": "admin"
        },
        "published_scylla_reports": {
          "name_layout": "{project}-published-reports",
          "policy": { "analysis": "project_read" },
          "owner": "admin"
        },
        "ingest": {
          "name_layout": "{project}-public-{platform}-{test_flag}",
          "policy": { "analysis": "project_read" },
          "owner": "admin"
        }
      },
      "file_specs": {
        "illumina": {
          ".1.fastq.gz": {
            "layout": "project.sample_id.run_id.direction.ftype.gzip"
          },
          ".2.fastq.gz": {
            "layout": "project.sample_id.run_id.direction.ftype.gzip"
          },
          ".csv": {
            "layout": "project.sample_id.run_id.ftype"
          }
        },
        "ont": {
          ".fastq.gz": {
            "sections": 5,
            "layout": "project.sample_id.run_id.ftype.gzip"
          },
          ".csv": {
            "sections": 4,
            "layout": "project.sample_id.run_id.ftype"
          }
        }
      }
    },
    "pathsafe": {
      "file_naming": {
        "identical": true,
        "allowed_characters": "alphanumeric,_,-,."
      },
      "artifact_layout": "project.sample_id.run_id",
      "files": [".1.fastq.gz", ".2.fastq.gz", ".csv"],
      "sites": { "birm": "admin", "public": "analysis" },
      "bucket_policies": {
        "site_ingest": ["get", "put", "list", "delete"],
        "site_read": ["get", "list"],
        "project_read": ["get", "list"],
        "project_private": []
      },
      "platform_buckets": {
        "ingest": {
          "name_layout": "{project}-{site}-{platform}-{test_flag}",
          "policy": "site_ingest",
          "owner": "{site}"
        }
      },
      "site_buckets": {
        "ingest": {
          "name_layout": "{project}-{site}-{platform}-{test_flag}",
          "policy": {
            "analysis": "site_ingest",
            "uploader": "site_ingest"
          },
          "owner": "{site}"
        }
      },
      "project_buckets": {
        "published_reads": {
          "name_layout": "{project}-published-reads",
          "policy": {},
          "owner": "admin"
        },
        "published_assemblies": {
          "name_layout": "{project}-published-assemblies",
          "policy": { "analysis": "project_read" },
          "owner": "admin"
        }
      },
      "file_specs": {
        "illumina": {
          ".1.fastq.gz": {
            "sections": 6,
            "layout": "project.sample_id.run_id.direction.ftype.gzip"
          },
          ".2.fastq.gz": {
            "sections": 6,
            "layout": "project.sample_id.run_id.direction.ftype.gzip"
          },
          ".csv": {
            "sections": 4,
            "layout": "project.sample_id.run_id.ftype"
          }
        }
      }
    }
  }
}
